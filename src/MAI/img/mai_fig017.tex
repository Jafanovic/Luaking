% !TeX spellcheck = cs_CZ

\documentclass[11pt]{standalone}
\usepackage{xltxtra}
\usepackage[usenames,x11names]{xcolor}
\usepackage{tikz}
  \usetikzlibrary{intersections}
  \usetikzlibrary{decorations.markings}
\usepackage{pgfplots}
  \pgfplotsset{compat=newest}
\usepackage{amsmath}


\begin{document}
  \begin{tikzpicture}[thick,scale=0.7, 
      every node/.style={transform shape},
      ]
  
  \tikzset{->-/.style={decoration={
    markings,
    mark=at position #1 with {\arrow{stealth}}},postaction={decorate}}}
    
    \begin{axis}[
      xmin = -1.5, xmax = 2.5, ymin = 0, ymax = 3.5,  % osy
      domain = -1:3.5,
      restrict y to domain=0:3,
      axis equal image,
      grid = major,   % both
      grid style={line width=.1pt, draw=gray!20},
      major grid style={dashed, line width=.2pt, draw=gray!40},
      clip = true,
      clip mode=individual,
      xtick={-2,-1,1,2,3,4}, % make steps of length 0.2
      ytick={0,1,2,3,4,5}, 
      axis x line = middle,
      axis y line = middle,
      xlabel={\(x\)}, ylabel={\(y\)},
      enlarge y limits={rel=0.07},
      enlarge x limits={rel=0.07}
      ]
      
      \addplot[color=Gold3, samples=10, smooth, ultra thick, unbounded coords=jump, no markers, 
               domain = -1:2.2] 
        gnuplot{x+1}; 
      
      \node [fill=white] at (rel axis cs: 0.9,0.9) {\(y=\dfrac{x^2-1}{x-1}\)};
      
      \draw[line width = 3pt, red, line cap=butt] (0.5,0) -- (1.5,0);
      \draw [thick] (0.5,-.2) node[below] {\(1-\delta\)} -- (0.5,0.1);
      \draw [thick] (1.5,-.2) node[below] {\(1+\delta\)} -- (1.5,0.1);
      
      \draw[line width = 3pt, red, line cap=butt] (0,1.5) -- (0,2.5);
      \draw [thick] (-.2, 1.5) node[left] {\(1-\varepsilon\)} -- (0.1, 1.5);
      \draw [thick] (-.2, 2.5) node[left] {\(1+\varepsilon\)} -- (0.1, 2.5 );
      
      \draw[dashed] (0.5,0) -- (0.5,1.5) -- (0,1.5);
      \draw[dashed] (1.5,0) -- (1.5,2.5) -- (0,2.5);
      \draw[dashed] (1,0) -- (1,2) -- (0,2);
  
      \draw[->-=.5] (1.25,0) node[below] {\(x\)} -- (1.25,2.25);
      \draw[->-=.5] (1.25,2.25) -- (0,2.25) node[left] {\(f(x)\)}; 
       
      \draw[black,fill=white] (1,0) circle (.4ex);
      \draw[black,fill=white] (1,2) circle (.4ex);
      \draw[black,fill=white] (0,2) circle (.4ex);
    \end{axis}
  \end{tikzpicture}
\end{document}